import{a as k,r as c,j as s,N as _,e as E}from"./index-B-YQeDst.js";import{u as P,$ as A,f as z,b as H,g as T,c as v,_ as m,d as M,H as R}from"./index-CdZjcFzk.js";const V=async()=>(await k.get("/api/parking/valet/counter")).data,q=async t=>(await k.put(`/api/parking/valet/availability/${t?1:0}`)).data??!1,w=()=>P({queryKey:["parking","valet"],queryFn:async()=>V(),enabled:!0,retry:!1});function B(){const[t,e]=c.useState(),{data:r}=w();return c.useEffect(()=>{r&&e(r)},[r]),[t]}function O(t){const e=c.useRef({value:t,previous:t});return c.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function I(t){const[e,r]=c.useState(void 0);return A(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const l=a[0];let d,o;if("borderBoxSize"in l){const i=l.borderBoxSize,b=Array.isArray(i)?i[0]:i;d=b.inlineSize,o=b.blockSize}else d=t.offsetWidth,o=t.offsetHeight;r({width:d,height:o})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}const y="Switch",[W,Z]=z(y),[D,F]=W(y),L=c.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:l,required:d,disabled:o,value:i="on",onCheckedChange:b,...$}=t,[u,p]=c.useState(null),N=H(e,h=>p(h)),x=c.useRef(!1),g=u?!!u.closest("form"):!0,[f=!1,S]=T({prop:a,defaultProp:l,onChange:b});return c.createElement(D,{scope:r,checked:f,disabled:o},c.createElement(v.button,m({type:"button",role:"switch","aria-checked":f,"aria-required":d,"data-state":j(f),"data-disabled":o?"":void 0,disabled:o,value:i},$,{ref:N,onClick:M(t.onClick,h=>{S(C=>!C),g&&(x.current=h.isPropagationStopped(),x.current||h.stopPropagation())})})),g&&c.createElement(K,{control:u,bubbles:!x.current,name:n,value:i,checked:f,required:d,disabled:o,style:{transform:"translateX(-100%)"}}))}),Q="SwitchThumb",G=c.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,a=F(Q,r);return c.createElement(v.span,m({"data-state":j(a.checked),"data-disabled":a.disabled?"":void 0},n,{ref:e}))}),K=t=>{const{control:e,checked:r,bubbles:n=!0,...a}=t,l=c.useRef(null),d=O(r),o=I(e);return c.useEffect(()=>{const i=l.current,b=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(b,"checked").set;if(d!==r&&u){const p=new Event("click",{bubbles:n});u.call(i,r),i.dispatchEvent(p)}},[d,r,n]),c.createElement("input",m({type:"checkbox","aria-hidden":!0,defaultChecked:r},a,{tabIndex:-1,ref:l,style:{...t.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function j(t){return t?"checked":"unchecked"}const U=L,X=G,ee=({})=>{const t=w(),[e]=B();return s.jsxs("div",{className:"h-full w-full flex flex-col items-center p-2",children:[s.jsx("div",{className:"w-72",children:s.jsxs(_,{to:"/home",className:"text-blue-300 flex justify-start items-center underline mb-8 hover:text-green-400 cursor-pointer",children:[s.jsx(R,{className:"h-6 w-6 mr-2"})," Home"]})}),e?s.jsxs("div",{className:"grid grid-cols-2 text-slate-300",children:[s.jsxs("div",{className:"text-2xl font-semibold col-span-2 flex justify-start items-center my-4",children:[s.jsx(E,{className:"h-7 w-7 mr-2"})," ",e==null?void 0:e.CounterName]}),s.jsx("div",{className:"border p-1",children:"GroupName"})," ",s.jsx("div",{className:"border p-1",children:e==null?void 0:e.GroupName}),s.jsx("div",{className:"border p-1",children:"CounterValue"})," ",s.jsx("div",{className:"border p-1",children:e==null?void 0:e.CounterValue}),s.jsx("div",{className:"border p-1",children:"CounterOccupied"})," ",s.jsx("div",{className:"border p-1",children:e==null?void 0:e.CounterOccupied}),s.jsx("div",{className:"border p-1",children:"CounterMaximum"})," ",s.jsx("div",{className:"border p-1",children:e==null?void 0:e.CounterMaximum}),s.jsx("div",{className:"border p-1",children:"DisplayThreshold"})," ",s.jsx("div",{className:"border p-1",children:e==null?void 0:e.DisplayThreshold}),s.jsx("div",{className:"border p-1",children:"MediumThreshold"})," ",s.jsx("div",{className:"border p-1",children:e==null?void 0:e.MediumThreshold}),s.jsx("div",{className:"border p-1",children:"HighThreshold"})," ",s.jsx("div",{className:"border p-1",children:e==null?void 0:e.HighThreshold}),s.jsxs("div",{className:"flex items-center justify-start col-span-2 mt-4 ",children:[s.jsx("label",{className:"text-white text-[15px] leading-none pr-[15px] text-xl font-semibold",htmlFor:"valet-availability",children:"Available"}),s.jsx(U,{className:"w-[42px] h-[25px] bg-blackA6 rounded-full relative shadow-[0_2px_10px] shadow-black focus:shadow-[0_0_0_2px] focus:shadow-black bg-red-500 data-[state=checked]:bg-green-500 outline-none cursor-default",id:"valet-availability",style:{WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},defaultChecked:(e==null?void 0:e.CounterValue)===1,onCheckedChange:r=>{q(r).then(()=>{t.refetch()})},children:s.jsx(X,{className:"block w-[21px] h-[21px] bg-white rounded-full shadow-[0_2px_2px] shadow-blackA4 transition-transform duration-100 translate-x-0.5 will-change-transform data-[state=checked]:translate-x-[19px]"})})]})]}):s.jsx("div",{className:"h-full w-full flex items-center justify-center",children:s.jsx("div",{className:"text-2xl font-semibold text-slate-300",children:"Loading..."})})]})};export{ee as ParkingPage,ee as default};
